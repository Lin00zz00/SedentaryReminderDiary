<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯æ—¥ä¹…åæƒ…å†µè°ƒæŸ¥</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .question {
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            transition: transform 0.2s;
        }

        .question:hover {
            transform: translateY(-2px);
        }

        .question-title {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: white;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option:hover {
            border-color: #4CAF50;
            background: #f1f8e9;
        }

        .option.selected {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .rating-options {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }

        .rating-option {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .rating-option.selected {
            background: #4CAF50;
            color: white;
        }

        .submit-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .emoji {
            font-size: 24px;
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .question {
                padding: 15px;
            }
            
            .option {
                padding: 12px;
            }
        }

        /* ä¿®æ”¹æŠ¥å‘Šå›¾ç‰‡çš„æ ·å¼ */
        #report-container {
            display: none;
            position: fixed;
            top: -9999px;
            left: -9999px;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            width: 600px;
            max-width: 90vw;
            z-index: 9999;
        }

        .report-header {
            text-align: center;
            margin-bottom: 40px;
            color: #2c3e50;
        }

        .report-header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .report-content {
            font-size: 18px;
            line-height: 1.8;
            color: #333;
        }

        .report-item {
            margin-bottom: 20px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .report-footer {
            margin-top: 40px;
            text-align: center;
            color: #666;
            font-size: 16px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            z-index: 1000;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“… æ¯æ—¥ä¹…åæƒ…å†µè°ƒæŸ¥</h1>
        </div>

        <div class="question">
            <div class="question-title">ğŸ“ ä»Šå¤©ä½ ä¹…åçš„æ€»æ—¶é•¿ï¼Ÿ</div>
            <div class="options">
                <div class="option" data-value="less-than-3">ğŸ•’ å°äº 3 å°æ—¶</div>
                <div class="option" data-value="3-5">ğŸ•’ 3-5 å°æ—¶</div>
                <div class="option" data-value="5-7">ğŸ•’ 5-7 å°æ—¶</div>
                <div class="option" data-value="more-than-7">ğŸ•’ è¶…è¿‡ 7 å°æ—¶</div>
            </div>
        </div>

        <div class="question">
            <div class="question-title">ğŸ“ ä»Šå¤©ä½ ä¸»è¦åœ¨å“ªäº›åœºæ™¯ä¹…åï¼Ÿï¼ˆå¤šé€‰ï¼‰</div>
            <div class="options">
                <div class="option" data-value="office">ğŸ¢ åŠå…¬å®¤</div>
                <div class="option" data-value="school">ğŸ“š å­¦æ ¡</div>
                <div class="option" data-value="home">ğŸ  å®¶é‡Œ</div>
                <div class="option" data-value="transport">âœˆï¸ äº¤é€šå·¥å…·</div>
                <div class="option" data-value="other">å…¶ä»–</div>
            </div>
        </div>

        <div class="question">
            <div class="question-title">ğŸ“ ä»Šå¤©ä½ ä¸»åŠ¨èµ·èº«å¤šå°‘æ¬¡ï¼Ÿï¼ˆä¸ç®—ä¸Šå•æ‰€ï¼‰</div>
            <div class="options">
                <div class="option" data-value="0">0 æ¬¡</div>
                <div class="option" data-value="1-2">1-2 æ¬¡</div>
                <div class="option" data-value="3-5">3-5 æ¬¡</div>
                <div class="option" data-value="6-plus">6 æ¬¡ä»¥ä¸Š</div>
            </div>
        </div>

        <div class="question">
            <div class="question-title">ğŸ“ ä»Šå¤©ä½ å› ä¹…åæ„Ÿåˆ°èº«ä½“ä¸é€‚çš„ç¨‹åº¦ï¼Ÿï¼ˆ1-5åˆ†ï¼‰</div>
            <div class="rating-options">
                <div class="rating-option" data-value="1">ğŸ˜Œ 1</div>
                <div class="rating-option" data-value="2">ğŸ˜ 2</div>
                <div class="rating-option" data-value="3">ğŸ˜¬ 3</div>
                <div class="rating-option" data-value="4">ğŸ˜£ 4</div>
                <div class="rating-option" data-value="5">ğŸ˜– 5</div>
            </div>
        </div>

        <button class="submit-btn" onclick="generateAndDownload()">ç”ŸæˆæŠ¥å‘Šå¹¶ä¸‹è½½</button>
    </div>

    <!-- æ·»åŠ æŠ¥å‘Šå®¹å™¨ -->
    <div id="report-container">
        <div class="report-header">
            <h1>ğŸ“… æ¯æ—¥ä¹…åæƒ…å†µæŠ¥å‘Š</h1>
        </div>
        <div class="report-content">
            <div class="report-item" id="report-date"></div>
            <div class="report-item" id="report-time"></div>
            <div class="report-item" id="report-duration"></div>
            <div class="report-item" id="report-locations"></div>
            <div class="report-item" id="report-standup"></div>
            <div class="report-item" id="report-discomfort"></div>
        </div>
        <div class="report-footer">
            ğŸ’ æ¸©é¦¨æç¤ºï¼šè®°å¾—é€‚æ—¶èµ·èº«æ´»åŠ¨ï¼Œä¿æŒå¥åº·å“¦ï¼
        </div>
    </div>

    <!-- æ·»åŠ åŠ è½½æç¤º -->
    <div class="loading">æ­£åœ¨ç”ŸæˆæŠ¥å‘Šå›¾ç‰‡...</div>

    <script>
        // å¤„ç†é€‰é¡¹é€‰æ‹©
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const parent = this.parentElement;
                if (parent.classList.contains('options')) {
                    // å¯¹äºå¤šé€‰é—®é¢˜ï¼Œå…è®¸é€‰æ‹©å¤šä¸ªé€‰é¡¹
                    this.classList.toggle('selected');
                } else {
                    // å¯¹äºå•é€‰é—®é¢˜ï¼Œåªèƒ½é€‰æ‹©ä¸€ä¸ªé€‰é¡¹
                    parent.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                }
            });
        });

        // å¤„ç†è¯„åˆ†é€‰æ‹©
        document.querySelectorAll('.rating-option').forEach(option => {
            option.addEventListener('click', function() {
                const parent = this.parentElement;
                parent.querySelectorAll('.rating-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        // ä¿®æ”¹ç”ŸæˆæŠ¥å‘Šçš„å‡½æ•°
        async function generateAndDownload() {
            const answers = {
                duration: getSelectedValue('.question:nth-child(2) .option'),
                locations: getSelectedValues('.question:nth-child(3) .option'),
                standUpTimes: getSelectedValue('.question:nth-child(4) .option'),
                discomfortLevel: getSelectedValue('.rating-option')
            };

            // è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´
            const now = new Date();
            const dateStr = now.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });
            const timeStr = now.toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });

            // æ›´æ–°æŠ¥å‘Šå†…å®¹
            document.getElementById('report-date').textContent = `ğŸ“† è®°å½•æ—¥æœŸï¼š${dateStr}`;
            document.getElementById('report-time').textContent = `â° è®°å½•æ—¶é—´ï¼š${timeStr}`;
            document.getElementById('report-duration').textContent = `ğŸ“ ä¹…åæ€»æ—¶é•¿ï¼š${answers.duration || 'æœªé€‰æ‹©'}`;
            document.getElementById('report-locations').textContent = `ğŸ“ ä¹…ååœºæ™¯ï¼š${answers.locations.join(', ') || 'æœªé€‰æ‹©'}`;
            document.getElementById('report-standup').textContent = `ğŸ“ ä¸»åŠ¨èµ·èº«æ¬¡æ•°ï¼š${answers.standUpTimes || 'æœªé€‰æ‹©'}`;
            document.getElementById('report-discomfort').textContent = `ğŸ“ èº«ä½“ä¸é€‚ç¨‹åº¦ï¼š${answers.discomfortLevel || 'æœªé€‰æ‹©'}`;

            // æ˜¾ç¤ºåŠ è½½æç¤º
            document.querySelector('.loading').style.display = 'block';

            try {
                // ä¸´æ—¶æ˜¾ç¤ºæŠ¥å‘Šå®¹å™¨
                const reportContainer = document.getElementById('report-container');
                reportContainer.style.display = 'block';
                reportContainer.style.top = '0';
                reportContainer.style.left = '0';
                reportContainer.style.position = 'fixed';
                reportContainer.style.width = '100%';
                reportContainer.style.height = '100%';
                reportContainer.style.overflow = 'auto';
                reportContainer.style.backgroundColor = 'rgba(255, 255, 255, 0.95)';

                // ç”Ÿæˆå›¾ç‰‡
                const canvas = await html2canvas(reportContainer, {
                    scale: 2,
                    useCORS: true,
                    backgroundColor: '#ffffff',
                    logging: false,
                    width: 600,
                    height: reportContainer.scrollHeight
                });

                // æ¢å¤æŠ¥å‘Šå®¹å™¨æ ·å¼
                reportContainer.style.display = 'none';
                reportContainer.style.top = '-9999px';
                reportContainer.style.left = '-9999px';
                reportContainer.style.position = 'fixed';
                reportContainer.style.width = '600px';
                reportContainer.style.height = 'auto';
                reportContainer.style.overflow = 'visible';
                reportContainer.style.backgroundColor = '#ffffff';

                // è½¬æ¢ä¸ºå›¾ç‰‡å¹¶ä¸‹è½½
                const img = canvas.toDataURL('image/png');
                const a = document.createElement('a');
                a.href = img;
                a.download = `ä¹…åæƒ…å†µæŠ¥å‘Š_${dateStr.replace(/\s+/g, '_')}_${timeStr.replace(/:/g, '-')}.png`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            } catch (error) {
                console.error('ç”Ÿæˆå›¾ç‰‡æ—¶å‡ºé”™:', error);
                alert('ç”Ÿæˆå›¾ç‰‡æ—¶å‡ºé”™ï¼Œè¯·é‡è¯•');
            } finally {
                // éšè—åŠ è½½æç¤º
                document.querySelector('.loading').style.display = 'none';
            }
        }

        function getSelectedValue(selector) {
            const selected = document.querySelector(`${selector}.selected`);
            return selected ? selected.textContent.trim() : '';
        }

        function getSelectedValues(selector) {
            return Array.from(document.querySelectorAll(`${selector}.selected`))
                .map(el => el.textContent.trim());
        }
    </script>
</body>
</html> 